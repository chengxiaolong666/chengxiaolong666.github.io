var countVoiceSMS=0;var countVerifyCode=0;var countdown=60;var count=0;var nVoiceMail=0;var bId=null;function sendSMSCode(b,a){if(b==1){if(countVerifyCode==3){info("您操作过于频繁!");return false}if(sendVerifyCode(a,2,"btn")){countVerifyCode++}}else{if(b==2){if(countVoiceSMS==3){info("您操作过于频繁!");return false}if(sendVerifyCode(a,1,"btn")){countVoiceSMS++}}}}function sendVerifyCode(e,c,g){nVoiceMail=c;bId=g;if(count>9){info("发送验证码次数超过10次，请联系客服！");return false}if(countdown==60||countdown==0){var b=$("#strMobile").val();if(!checkSubmitMobil(b)){return false}var d=new CDO();d.setStringValue("strServiceName","UserService");if(c==1){d.setStringValue("bIsVoiceMail","1")}if(e==1){d.setStringValue("strTransName","registerMobileCode");d.setStringValue("strMobile",b)}else{if(e==2||e==7){d.setStringValue("strTransName","sendMobileCode");d.setStringValue("strMobile",b)}else{if(e==3||e==4||e==5||e==6||e==8||e==9){d.setStringValue("strTransName","sendUserCode");var f=getStringValue("lUserId");d.setLongValue("lUserId",Number(f));if(e==9){var a=$("#strReserveMobile").val();d.setStringValue("strMobile",a)}}}}d.setIntegerValue("nSendType",e);raiseTrans(d,"callBackForSendVerifyCode");if(null==bId||typeof(bId)=="undefined"){settime("btn")}else{settime1(nVoiceMail,bId)}return true}else{return false}}function callBackForSendVerifyCode(b,c,a){if(a==undefined||a==null){info("请求失败!");return}if(a.nCode==0){count++;if(nVoiceMail!=1){info("验证码已经发出")}}else{info(a.strText);countdown=0}}var countdown=60;function settime(b){var a=$("#"+b);if(countdown==0){a.attr("style","text-decoration: underline;");a.html("重新获取");countdown=60}else{a.attr("style","color: #999;text-decoration:none;");a.html("重新发送(<span style='color:red'>"+countdown+"</span>)");countdown--;setTimeout(function(){settime(b)},1000)}}function settime1(a,c){var b=$("#"+c);if(a==1){if(countdown==0){countdown=60;b.attr("style","text-decoration: underline;");$("#bdTishi2").hide();$("#bdTishi1").show();$("#btn1").html("重新语音获取")}else{b.attr("style","color: #999;text-decoration:none;");$("#bdTishi1").hide();$("#bdTishi2").show();countdown--;setTimeout(function(){settime1(a,c)},1000)}}else{if(countdown==0){countdown=60;b.html("重新获取").attr("style","");$("#btn1").attr("style","text-decoration: underline;")}else{b.html('重新获取(<span style="color: red;"> '+countdown+" </span>s)");b.attr("style","color: #999;");$("#btn1").attr("style","color: #999;text-decoration:none;");countdown--;setTimeout(function(){settime1(a,c)},1000)}}};