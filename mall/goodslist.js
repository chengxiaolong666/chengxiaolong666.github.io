var _obj={};_obj.pageSize=6;_obj.pageIndex=0;_obj.Loadflag=true;_obj.asynFlag=true;_obj.nCatId=0;_obj.liId="li_0";window.onload=function(){_shade_layer.show("加载中,请稍候......");_obj.dom=document.getElementById("dataList_id");_obj.getTypeList();_obj.loadList()};_obj.loadList=function(){var b=_obj.pageIndex*_obj.pageSize;var a=new CDO();a.setStringValue("strServiceName","CommonService");a.setStringValue("strTransName","getGoodsItem");a.setIntegerValue("nStartIndex",b);a.setIntegerValue("nPageSize",_obj.pageSize);a.setIntegerValue("nCatId",_obj.nCatId);raiseTrans(a,"callBackGeneratePage");_obj.asynFlag=false};function callBackGeneratePage(l,c,b){_shade_layer.hide();if(b==null||typeof b=="undefined"||b.nCode!=0){if(b.nCode==1){_obj.dom.innerHTML="";_Not.show("dataList_id","没有数据");return}info(b.strText);return}if(_obj.pageIndex==0){_obj.dom.innerHTML=""}if(b.nCode==0&&c.getCDOArrayValue("cdoGoodsList").length>0){_obj.total=c.getIntegerValue("nRecordCount");var g=c.getCDOArrayValue("cdoGoodsList");var h=document.getElementById("hide_div_id");for(var e=0;e<g.length;e++){var f=h.innerHTML;var d=g[e];var k=d.getStringValue("lId");f=f.replace("#lId#",k);f=f.replace("#strLoading#","../img/mall/laimgload.gif");f=f.replace("#strLogoURL#",d.getStringValue("strLogoURL"));f=f.replace("#strDetail#",d.getStringValue("strDetail"));f=f.replace("#nPrice#",(Number(d.getStringValue("nPrice"))/100).toFixed(2));f=f.replace("#strNotice#",d.getStringValue("strNotice"));var j=document.createElement("li");j.innerHTML=f;j.setAttribute("lId",k);(function(i,m){$(i).on("click",function(){var n=this;_obj.openDetail(m)})})(j,k);_obj.dom.appendChild(j)}var a=$("#dataList_id").find("img");_laimgload.loadImg(a);window.onscroll=function(){_laimgload.loadImg(a)};_obj.asynFlag=true}if(_obj.pageIndex==0){_shade_layer.hide()}_obj.pageIndex=_obj.pageIndex+1;if(_obj.pageIndex*_obj.pageSize>=_obj.total){_obj.Loadflag=false}}_obj.openDetail=function(a){clearArray(["lGoodsId"]);setStringValue("lGoodsId",a);openWindow("mall/goodsDetail.htm","商品详情","",0)};_obj.getTypeList=function(){var a=new CDO();a.setStringValue("strServiceName","CommonService");a.setStringValue("strTransName","getCategoryList");raiseTrans(a,"callBackTypeList")};function callBackTypeList(m,d,b){if(b==null||typeof b=="undefined"){info("请求失败");return}if(b.nCode!=0){info(b.strText);return}if(b.nCode==0&&d.exists("cdosCat")){var a=document.getElementById("ul_type_id");var f=d.getCDOArrayValue("cdosCat");var l="";for(var e=0;e<f.length;e++){var h=f[e];var j=h.getStringValue("strName");var c="li_"+(e+1);var k="null";if(_obj.liId==c){k="row"}l+="<li id="+c+" class="+k+" onclick=\"_obj.chooseType(this,'"+h.getStringValue("nId")+"','"+j+"')\">"+j+"</li>"}var g="null";if(_obj.liId=="li_0"){g="row"}a.innerHTML="";l="<li id='li_0' class="+g+" onclick=\"_obj.chooseType(this,'0','全部分类')\">全部分类</li>"+l;a.innerHTML=l}document.getElementById("div_type_id").style.display="block"}_obj.openZZ=function(){document.getElementById("app_screen01").style.display="block";_Box_object.shownavigation()};_obj.openZZ2=function(){document.getElementById("app_screen01").style.display="none";_Box_object.hidenavigation()};_obj.chooseType=function(d,b,e){_Box_object.hidenavigation();document.getElementById("app_screen01").style.display="none";var a=d.className;if(a&&a=="row"){return}document.getElementById("title_id").innerHTML="";document.getElementById("title_id").innerHTML=e;$(document).scrollTop(0);$("#dataList_id").scrollTop(0);_obj.liId=d.id;var c=jQuery(d);c.siblings("li").removeClass();c.addClass("row");_obj.nCatId=b;_obj.pageIndex=0;_obj.dom.innerHTML="";_shade_layer.show("加载中,请稍候......");_obj.Loadflag=true;_obj.asynFlag=true;_obj.loadList()};$("#container").scroll(function(){var b=$(this).scrollTop();var a=$(document).height();var c=$(this).height();if(b+c>=a){if(_obj.asynFlag==true&&_obj.Loadflag==true){_obj.loadList()}}});_obj.get=function(a){return document.getElementById(a)};_obj.show=function(c,b){if((typeof c==="string")&&c.constructor==String){c=document.getElementById(c)}if(c){var a=b==true?"block":"none";c.style.display=a}};_obj.html=function(b,a){if((typeof b==="string")&&b.constructor==String){b=document.getElementById(b)}if(b){b.innerHTML="";b.innerHTML=a}};function toOrderList(){openDelayWindow("myCenter/mallOrder/orderList.htm","订单列表","backType=0",0)}jsHeight.bodyheight();jsHeight.max_height("container",50);window.onresize=function(){jsHeight.bodyheight()};