var lBuyerId=0;jsHeight.bodyheight();$(function(){setTimeout(function(){_shade_layer.show("加载中,请稍候...");setBackURL("mall/beforePay.htm","订单支付","",1);lBuyerId=getStringValue("lUserId");getAddressListByBuyerId();$("#toBeforePay").click(function(){toBeforePay("")});$("#toOrderList").click(function(){openDelayWindow("myCenter/mallOrder/orderList.htm","订单列表","backType=addressList",0)});$("#toAddAddress").click(function(){openDelayWindow("mall/addressAdd.htm","添加地址","",0)});if($("#AddAddressButtonHA")){$("#AddAddressButtonHA a").click(function(){openDelayWindow("mall/addressAdd.htm","添加地址","",0)})}},300)});function getAddressListByBuyerId(){var a=new CDO();a.setStringValue("strServiceName","AddressService");a.setStringValue("strTransName","getAddressList");a.setLongValue("lBuyerId",Number(lBuyerId));raiseTrans(a,"callBackForGAL")}function callBackForGAL(b,g,a){if(a==undefined||a==null||a.nCode!=0){document.getElementById("AddAddressButtonArea").style.display="block";_shade_layer.hide();return false}if(g.exists("cdoAddressList")){var m=g.getCDOArrayValue("cdoAddressList");if(m.length>0){document.getElementById("AddAddressButtonArea").innerHTML=document.getElementById("AddAddressButtonHA").innerHTML}var c="";for(var j=0;j<m.length;j++){var k=m[j];if(!k.exists("addressId")||!k.exists("strConsigneeName")||!k.exists("strMobile")||!k.exists("strFullDistrictName")||!k.exists("strAddress")||!k.exists("nIsDefault")){continue}var e=k.getLongValue("addressId");var d=k.getStringValue("strConsigneeName");var o=k.getStringValue("strMobile");var h=k.getStringValue("strFullDistrictName");var f=k.getStringValue("strAddress");var l=k.getIntegerValue("nIsDefault");c=c+'<li><a href="javascript:void(0);"><div class="WlistSDeta">';c=c+'<div class="WBusiManageMentImg" onclick= "toBeforePay('+e+');" ><img src="../img/mall/api_management_';if(l!=1){c=c+"hs"}c=c+'Right.png"/></div>';c=c+'<div class="WapiLmanagement clearfix"  onclick= "toEditAdress('+e+');" ><div class="WapiManagementVid">';c=c+'<div class="WapiManageMentUs">收货人：</div><div class="WapiManageMentCont">';c=c+d;if(l==1){c=c+'<span class="span_left_padding"><a href="#" class="span_Orange">[默认]</a></span>'}c=c+'</div></div><div class="WapiManagementVid"><img src="../img/public/api_Arrow.png" /><div class="WapiManageMentUs">联系电话：</div><div class="WapiManageMentCont">';c=c+o;c=c+'</div></div><div class="WapiManagementVid"><div class="WapiManageMentUs">收货地址：</div><div class="WapiManageMentCont">';var n=h.replace("|","").replace("|","")+" "+f;c=c+n;c=c+"</div></div></div></div></a></li>"}$("#showArea").html(c)}_shade_layer.hide()}function toEditAdress(a){openWindow("mall/addressedit.htm","修改地址","strAddressId="+a,1)}function toBeforePay(a){if(a!=""){setStringValue("strSelectAddressId",a)}setTimeout(function(){openWindow("mall/beforePay.htm","订单支付","",1)},100)};