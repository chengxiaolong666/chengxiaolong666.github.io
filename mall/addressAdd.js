var userAddressObj={strProvince:"",strCity:"",strcounty:"",lBuyerId:0,strConsigneeName:"",strAddress:"",strMobile:""};jsHeight.bodyheight();$(document).ready(function(){userAddressObj.lBuyerId=getStringValue("lUserId");userAddressObj.lBuyerId=Number(userAddressObj.lBuyerId);$("#toBeforePay").click(function(){toAdressList()});$("#toOrderList").click(function(){openDelayWindow("myCenter/mallOrder/orderList.htm","订单列表","backType=addressAdd",0)});$("#strIsDefault").click(function(){if($("#strIsDefault").prop("checked")!=true){$("#strIsDefault").prop("checked",true);$("#strIsDefault").attr("src","../img/public/dx_02.png")}});$("#addAddress").click(function(){addAddress()})});function toAdressList(){setTimeout(function(){back()},300)}function toBeforePay(a){if(a!=""){setStringValue("strSelectAddressId",a)}openWindow("mall/beforePay.htm","订单支付","",1)}function addAddress(){userAddressObj.strConsigneeName=$("#strConsigneeName").val();userAddressObj.strAddress=$("#strAdress").val();userAddressObj.strMobile=$("#strMobile").val();if(isVarComplete(userAddressObj.strProvince)||isVarComplete(userAddressObj.strCity)||isVarComplete(userAddressObj.strcounty)){info("请完善区域信息");return false}if(isVarComplete(userAddressObj.lBuyerId)||userAddressObj.lBuyerId===0){info("当前登录人为空");return false}if(isVarComplete(userAddressObj.strConsigneeName)){info("请填写姓名");return false}if(isVarComplete(userAddressObj.strMobile)){info("请填写手机号");return false}if(isVarComplete(userAddressObj.strAddress)){info("请填写详细地址");return false}userAddressObj.strAddress=richTextInputEncoder(userAddressObj.strAddress);userAddressObj.strMobile=richTextInputEncoder(userAddressObj.strMobile);if(checkSubmitMobil(userAddressObj.strMobile)){var c=$("#strIsDefault").attr("checked")=="checked";var a=userAddressObj.strProvince+"|"+userAddressObj.strCity+"|"+userAddressObj.strcounty;var b=new CDO();b.setStringValue("strServiceName","AddressService");b.setStringValue("strTransName","addAddress");b.setLongValue("lBuyerId",userAddressObj.lBuyerId);b.setStringValue("strFullDistrictName",a);b.setStringValue("strAddress",userAddressObj.strAddress);b.setStringValue("strConsigneeName",userAddressObj.strConsigneeName);b.setStringValue("strMobile",userAddressObj.strMobile);if(c){b.setIntegerValue("nIsDefault",1)}else{b.setIntegerValue("nIsDefault",0)}raiseTrans(b,"callBackForAA")}}function callBackForAA(c,d,a){if(a==undefined||a==null||a.nCode!=0){info("添加当前地址信息失败!");return false}var b=d.getLongValue("lAddressId");if(b!==null&&b!==undefined&&b!==""){info("添加成功！");toBeforePay(b)}else{toAdressList()}};