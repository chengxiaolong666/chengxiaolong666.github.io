var lUserId=getQueryString("lUserId");var strMobile=getQueryString("strMobile");var strEquipmentNo=getDeviceCode();function changereEqDiv(a){if(a==1){$("#reEq_1").hide();$("#reEq_2").show()}else{if(a==2){$("#reEq_1").show();$("#reEq_2").hide()}}}function reEquipment(){var a=$("#strVerifyCode").val();if(!checkSubmitMobil(strMobile)){return}if(!checkStr(a)){EngineClass.info("验证码不能为空");return}changereEqDiv(1);try{var c=new CDO();c.setStringValue("strServiceName","UserService");c.setStringValue("strTransName","updateEquipmentNo");c.setStringValue("lUserId",lUserId);c.setStringValue("strEquipmentNo",strEquipmentNo);c.setStringValue("strMobileCode",a);EngineClass.raiseTrans(c,"callBackForUpdateEquipmentNo")}catch(b){changereEqDiv(2);EngineClass.info("请求失败!");return}}function callBackForUpdateEquipmentNo(b,c,a){if(a==undefined||a==null){changereEqDiv(2);EngineClass.info("请求失败!");return}if(a.nCode==0){EngineClass.setNotices(lUserId+"",20);clearArrayGesturePassword(lUserId);info("更换设备成功,请重新登录");setTimeout(function(){delDeviceLocalCahe();EngineClass.openWindow("login.htm","登录","",2,"")},2000)}else{changereEqDiv(2);EngineClass.info(a.strText)}}function delDeviceLocalCahe(){setTimeout(function(){var a=new CDO();a.setStringValue("strServiceName","CommonService");a.setStringValue("strTransName","delDeviceLocalCahe");a.setStringValue("strDeviceLocalCode",strEquipmentNo);EngineClass.raiseTrans(a,"callBackForDelDeviceLocalCahe")},10)}function clearArrayGesturePassword(b){var a=["",1];EngineClass.setArrayValue("gesturePasswordArray"+b,a)};