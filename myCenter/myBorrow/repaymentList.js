var _obj={};_obj.pageSize=10;_obj.pageIndex=0;_obj.total=0;_obj.total_20=0;_obj.total_10=0;_obj.dom=document.getElementById("dataList_id_repayment");_obj.lId=0;_obj.refresh=false;_obj.generatedCount=0;_obj.nState="5,7";_obj.totalAmount=0;_obj.checkFlag=false;_obj.loadFlag=true;_obj.asynFlag=true;_obj.rpTag=0;jsHeight.bodyheight();window.onload=function(){_shade_layer.show("努力加载中,请稍候...");setTimeout(function(){setBackURL("myCenter/myIndex.htm","我的","",1,"");$("#li_b2").bind("click",function(){changeDiv_b1()});_obj.loadList()},300)};_obj.loadList=function(){document.getElementById("div_b1").innerHTML="";_obj.rpTag=0;if(_obj.refresh==true){var d=0}else{var d=_obj.pageIndex*_obj.pageSize}var a=getStringValue("lUserId");var b=getStringValue("strMobile");if(_obj.pageIndex==0){_obj.dom.innerHTML=""}var c=new CDO();c.setStringValue("strServiceName","CommonService");c.setLongValue("lBorrowerId",Number(a));c.setIntegerValue("nPageSize",_obj.pageSize);c.setIntegerValue("nRecordOffset",d);c.setStringValue("strMobile",b);if(_obj.nState=="5,7"){c.setStringValue("strTransName","getAllRepayMentList");c.setStringValue("nState",_obj.nState);raiseTrans(c,"callBackForGetBaseBorrowIntentInfoForMobile")}else{if(_obj.nState=="9"){c.setStringValue("strTransName","getAllRepayMentList");c.setStringValue("nState",_obj.nState);raiseTrans(c,"callBackForGetBaseBorrowIntentInfoForMobile2")}}_obj.asynFlag=false};function callBackForGetBaseBorrowIntentInfoForMobile(t,y,z){if(z==undefined||z==null){info("请求失败!");_shade_layer.hide();return}if(z.nCode==0){if(y.exists("cdosBorrowIntentList")){var x=y.getCDOArrayValue("cdosBorrowIntentList");_obj.total_20=Number(y.getIntegerValue("nRecordCount"));_obj.total_10=Number(y.getIntegerValue("nRecordCount10"));_obj.total=_obj.total_10+_obj.total_20;if(_obj.total==0){_Not.show("div_b1","您暂无借款!","../../");_shade_layer.hide();return}$("#totalAmount_div").show();var h=x.length;for(var s=0;s<h;s++){var a=$("#data_model_div").html();var p=x[s].getStringValue("strAmount");_obj.totalAmount+=p;var q=x[s].getStringValue("strCreateTime");var r=x[s].getStringValue("strStateDesc");var e=x[s].getStringValue("strPendingAmount");var g=x[s].getStringValue("lId");var m=x[s].getStringValue("strBorrowerMonthRate");var A=x[s].getStringValue("nState");var l=x[s].getStringValue("nRepay");if(Number(A)==7||A=="7"){_obj.rpTag=1}var f=x[s].exists("nHaier")?x[s].getStringValue("nHaier"):"0";var d=x[s].exists("strContractNo")?x[s].getStringValue("strContractNo"):"";var w=x[s].exists("strConsultNo")?x[s].getStringValue("strConsultNo"):"";var u=x[s].exists("strAuthorizeNum")?x[s].getStringValue("strAuthorizeNum"):"";var c=x[s].exists("strVersionType")?x[s].getStringValue("strVersionType"):"";var b=x[s].exists("strProductName")?x[s].getStringValue("strProductName"):"";var n=x[s].exists("strBorrowEndDate")?x[s].getStringValue("strBorrowEndDate"):"";var k=x[s].exists("nFastPayment")?x[s].getStringValue("nFastPayment"):"0";var o=x[s].exists("nBalence")?x[s].getStringValue("nBalence"):"0";var B=x[s].exists("nWithhold")?x[s].getStringValue("nWithhold"):"0";var v=k+","+o+","+B;var j=document.createElement("li");a=a.replace("#lId#",g);a=a.replace("#strPendingAmount#",e);a=a.replace("#strBorrowerMonthRate#",m);a=a.replace("#nState#",A);a=a.replace("#lId#",g);a=a.replace("#strVersionType#",c);a=a.replace("#nHaier#",f);a=a.replace("#nRepay#",l);a=a.replace("#lId#",g);a=a.replace("#strAmount#",p);a=a.replace("#payTypeBorrow1#",v);a=a.replace("#payTypeBorrow2#",v);a=a.replace("#lId#",g);a=a.replace("#strAmount#",p);a=a.replace("#strCreateTime#",q);a=a.replace("#strBorrowerMonthRate#",m);a=a.replace("#nState#",A);a=a.replace("#lId#",g);a=a.replace("#strContractNo#",d);a=a.replace("#strConsultNo#",w);a=a.replace("#strVersionType#",c);a=a.replace("#nHaier#",f);a=a.replace("#nRepay#",l);a=a.replace("#strAuthorizeNum#",u);a=a.replace("#borrowMoney#",fmoney(p,2));a=a.replace("#repayMoney#",fmoney(e,2));a=a.replace("#borrowNo#",g);a=a.replace("#borrowDate#",q);a=a.replace("#borrowProduct#",b);if(n==""){a=a.replace("#endRepayDateStyle#","display: none;")}a=a.replace("#endRepayDate#",n);a=a.replace("#repayType#",r);a=a.replace("#lId#",g);a=a.replace("#generatedCount#",_obj.generatedCount);a=a.replace("#strBorrowerMonthRate#",m);a=a.replace("#generatedCount#",_obj.generatedCount);j.setAttribute("id","li_"+_obj.generatedCount);j.innerHTML=a;_obj.dom.appendChild(j)}_shade_layer.hide()}else{_shade_layer.hide()}}else{_shade_layer.hide()}_obj.pageIndex=_obj.pageIndex+1;if(_obj.pageIndex*_obj.pageSize>=_obj.total){_obj.loadFlag=false}_obj.asynFlag=true}function callBackForGetBaseBorrowIntentInfoForMobile2(q,u,v){if(v==undefined||v==null){_shade_layer.hide();info("请求失败!");return}if(v.nCode==0&&u.exists("cdosBorrowIntentList")){var t=u.getCDOArrayValue("cdosBorrowIntentList");_obj.total_20=Number(u.getIntegerValue("nRecordCount"));_obj.total_10=Number(u.getIntegerValue("nRecordCount10"));_obj.total=_obj.total_10+_obj.total_20;if(_obj.total==0){_Not.show("div_b1","您暂无还款!","../../");_shade_layer.hide();return}var h=t.length;for(var p=0;p<h;p++){var a=$("#repayover_model_div").html();var m=t[p].getStringValue("strAmount");var n=t[p].getStringValue("strCreateTime");var o=t[p].getStringValue("strStateDesc");var e=t[p].getStringValue("strPendingAmount");var g=t[p].getStringValue("lId");var k=t[p].getStringValue("strBorrowerMonthRate");var w=t[p].getStringValue("nState");var f=t[p].exists("strContractNo")?t[p].getStringValue("strContractNo"):"";var s=t[p].exists("strConsultNo")?t[p].getStringValue("strConsultNo"):"";var c=t[p].exists("strVersionType")?t[p].getStringValue("strVersionType"):"";var b=t[p].exists("strProductName")?t[p].getStringValue("strProductName"):"";var l=t[p].exists("strBorrowEndDate")?t[p].getStringValue("strBorrowEndDate"):"";var r=t[p].exists("lPaidSumAmount")?t[p].getStringValue("lPaidSumAmount"):"";var d=t[p].exists("strRepaySuccessDate")?t[p].getStringValue("strRepaySuccessDate"):"";var j=document.createElement("li");_obj.generatedCount++;a=a.replace("#strAmount#",m);a=a.replace("#strCreateTime#",n);a=a.replace("#strBorrowerMonthRate#",k);a=a.replace("#nState#",w);a=a.replace("#lId#",g);a=a.replace("#strContractNo#",f);a=a.replace("#strConsultNo#",s);a=a.replace("#strVersionType#",c);a=a.replace("#repmentMoney#",fmoney(r/100,2));a=a.replace("#repmentTime#",d);a=a.replace("#borrowMoney#",fmoney(m,2));a=a.replace("#borrowTime#",n);a=a.replace("#productName#",b);a=a.replace("#strStateDesc#",o);a=a.replace("#lId#",g);a=a.replace("#generatedCount#",_obj.generatedCount);j.setAttribute("id","li_"+_obj.generatedCount);j.innerHTML=a;_obj.dom.appendChild(j)}}else{_shade_layer.hide()}_shade_layer.hide();_obj.pageIndex=_obj.pageIndex+1;if(_obj.pageIndex*_obj.pageSize>=_obj.total){_obj.loadFlag=false}_obj.asynFlag=true}function reCharge(){var h=$("#check_lId").val();var g=$("#check_MonthRate").val();var e=$("#totalAmount_hidden").val();var a=$("#check_versionType").val();var d=$("#nHaier").val();var b=$("#payTypeBorrow").val();if(h==-1){info("请选择一笔借款")}else{var f="payTypeBorrow="+b+"&nHaier="+d+"&lId="+h+"&strBorrowerMonthRate="+g+"&lMaxRepayAmount="+e+"&strVersionType="+a+"&pTag=1&url=myCenter/myBorrow/repaymentList.htm";if(a=="2"||a==2){openWindow("myCenter/myBorrow/borrowReCharge.htm","还款",f,0)}else{var c=new CDO();c.setStringValue("strServiceName","CommonService");c.setStringValue("strTransName","isCanRep");c.setStringValue("applyId",h);raiseTrans(c,"callBackForIsCanRep")}}}function callBackForIsCanRep(b,e,g){var h=$("#check_lId").val();var l=$("#check_MonthRate").val();var c=$("#totalAmount_hidden").val();var j=$("#check_versionType").val();if(g==undefined||g==null){info("请求失败!");return false}var d="lId="+h+"&strBorrowerMonthRate="+l+"&lMaxRepayAmount="+c+"&strVersionType="+j+"&pTag=1&url=myCenter/myBorrow/repaymentList.htm&repayType=1";var k=e.getCDOValue("checkResult");var a=k.getStringValue("CODE");if(a=="0000"){var f=k.getStringValue("isAble");if(f=="0"||f==0){info("请先还清逾期的账单!")}else{openWindow("myCenter/myBorrow/repayment_pay.htm","还款",d,0)}}}function showBorrowInfo(a,d,g,n,l,k,h,b,f,m,j,e){var c="payTypeBorrow="+a+"&strAuthorizeNum="+e+"&nRepay="+j+"&nHaier="+m+"&strAmount="+d+"&strCreateTime="+g+"&strBorrowerMonthRate="+n+"&strStateDesc="+l+"&lId="+k+"&strContractNo="+h+"&strConsultNo="+b+"&strVersionType="+f;if(f=="2"||f==2){openWindow("myCenter/myBorrow/borrowInfo.htm","借款详情",c,0)}else{openWindow("myCenter/myBorrow/borrowInfo10.htm","借款详情",c,0)}}function chooseRepayment(b,d,f,e,h,c,j,g){if(e==7){info("还款中请稍候!");return false}if(g==0){info("当日不可还款!");return false}$("#nHaier").val(j);$("#payTypeBorrow").val(b);if($("#check_lId").val()==-1){$("#img_red_"+h).show();$("#img_grey_"+h).hide();$("#totalAmount").html("￥"+d);$("#totalAmount_hidden").val(d);$("#check_lId").val(h);$("#check_MonthRate").val(f);$("#check_versionType").val(c)}else{var a=$("#check_lId").val();$("#img_red_"+a).hide();$("#img_grey_"+a).show();$("#img_red_"+h).show();$("#img_grey_"+h).hide();$("#totalAmount").html("￥"+d);$("#totalAmount_hidden").val(d);$("#check_lId").val(h)}}function cancelRepayment(a,b){$("#img_red_"+b).hide();$("#img_grey_"+b).show();$("#totalAmount").html("￥0.00");$("#totalAmount_hidden").val(0);$("#check_lId").val(-1)}function changeDiv_b1(){_shade_layer.show("努力加载中,请稍候...");$("#totalAmount_div").hide();$("#li_b1").removeClass();$("#li_b2").removeClass();$("#li_b2").addClass("row");$("#li_b2").unbind("click");$("#li_b1").click(function(){changeDiv_b2()});_obj.loadFlag=true;_obj.asynFlag=true;_obj.pageIndex=0;_obj.generatedCount=0;_obj.nState="9";$("#dataList_id_repayment").html("");_obj.loadList()}function changeDiv_b2(){_shade_layer.show("努力加载中,请稍候...");$("#totalAmount").html("￥"+0);$("#totalAmount_hidden").val(0);$("#chooseRepaymentAll").show();$("#cancelRepaymentAll").hide();$("#li_b1").removeClass();$("#li_b2").removeClass();$("#li_b1").addClass("row");$("#li_b1").unbind("click");$("#li_b2").click(function(){changeDiv_b1()});_obj.loadFlag=true;_obj.asynFlag=true;_obj.pageIndex=0;_obj.generatedCount=0;_obj.nState="5,7";_obj.totalAmount=0;_obj.checkFlag=false;$("#dataList_id_repayment").html("");$("#check_lId").val(-1);_obj.loadList()}$(document).scroll(function(){var b=$(this).scrollTop();var a=$(document).height();var c=$(this).height();if(b+c>=a){if(_obj.asynFlag==true&&_obj.loadFlag==true){_obj.loadList()}}});var toBorrow=function(){_shade_layer.show("努力加载中,请稍候...");_credit.lUserId=getStringValue("lUserId");_credit.phone=getStringValue("strLoginId");_credit.pageFrom=0;_credit.proj="0";_credit.realNameAuthenState()};function productInitHeight(){var b=0;var c=0;if(window.innerWidth){b=window.innerWidth}else{if((document.body)&&(document.body.clientWidth)){b=document.body.clientWidth}}if(window.innerHeight){c=window.innerHeight}else{if((document.body)&&(document.body.clientHeight)){c=document.body.clientHeight}}if(document.documentElement&&document.documentElement.clientHeight&&document.documentElement.clientWidth){c=document.documentElement.clientHeight;b=document.documentElement.clientWidth}var d=document.getElementById("borrow_financial_class");var f=b*0.9;var a=f/2;var e=(f/2)-1;var h=d.getElementsByTagName("li").length;var j=d.getElementsByTagName("li");var g="";d.style.width=f+"px";for(i=0;i<h;i++){if(i==1){j[i].style.width=e+"px"}else{j[i].style.width=a+"px"}}}productInitHeight();