var _obj={};_obj.lUserId="";_obj.lLendIntentId="";_obj.pName="";_obj.depositMoney="0";_obj.totalMoney="0";_obj.qxMoney="0";_obj.qxProfit="0";jsHeight.bodyheight();window.onload=function(){_shade_layer.show("努力加载中,请稍候...");_obj.lLendIntentId=getStringValue("lLendIntentId");_obj.pName=getStringValue("strLendProductName");_obj.lUserId=getStringValue("lUserId");setBackURL("myCenter/myLend/list.htm","理财列表","",1,"");if(isNaN(_obj.lUserId)){alert("非法登录，用户信息有误！");return false}_obj.lUserId=Number(_obj.lUserId);_obj.loadQxDetail()};_obj.loadQxDetail=function(){var a=new CDO();a.setStringValue("strServiceName","LendIntentService");a.setStringValue("strTransName","getRateAccumulateLendPayForInfo");a.setLongValue("lLendIntentId",Number(_obj.lLendIntentId));raiseTrans(a,"callBackForQxDetail")};function callBackForQxDetail(e,f,c){if(c==undefined||c==null){_shade_layer.hide();return}if(c.nCode==0){var b=f.getLongValue("lInterest");var d=f.getLongValue("lPrincipal");var g=f.getLongValue("lAmount");var a=f.getIntegerValue("nCashCount");_obj.html("all_money",(Number(g)/100).toFixed(2));_obj.html("qx_count",a);_obj.html("qxbj",(Number(d)/100).toFixed(2));_obj.html("qxsy",(Number(b)/100).toFixed(2));_obj.html("tssy",(Number(b)/100).toFixed(2));_obj.html("pName",_obj.pName);_shade_layer.hide()}else{_shade_layer.hide()}}document.getElementById("all_wk_qx").addEventListener("click",function(){var c=document.getElementById("all_money").innerText;c=Number(c);_obj.depositMoney=c;var a=document.getElementById("qx_count").innerText;a=(Number(a));if(a==0){info("您本月的取现次数已经使用,不能取现!");return false}if(c==0){info("您的余额不足,不能提现！");return false}var b=new CDO();b.setStringValue("strServiceName","RichScanService");b.setStringValue("strTransName","isSetPwd");b.setLongValue("lUserId",_obj.lUserId);raiseTrans(b,"callBackForisSetPwd1")});document.getElementById("wk_qx").addEventListener("click",function(){var a=document.getElementById("qx_count").innerText;a=(Number(a));var c=$("#all_money2").val();c=(Number(c));_obj.depositMoney=c;var e=document.getElementById("all_money").innerText;e=(Number(e));if(a==0){info("您本月的取现次数已经使用,不能取现!");return false}if(c<=0){info("请输入正确的提现金额!");return false}var b=/^\d+(\.\d{1,2})?$/;if(!b.test(c)){info("您输入的金额格式不正确!");return false}if(c>e){info("您输入的提现金额超过可提现金额!");return false}if(e<100&&c<e){info("您当前的可取现金额不够100元,请全部取出!");return false}var d=new CDO();d.setStringValue("strServiceName","RichScanService");d.setStringValue("strTransName","isSetPwd");d.setLongValue("lUserId",_obj.lUserId);raiseTrans(d,"callBackForisSetPwd1")});var openPayFlag=0;function callBackForisSetPwd1(c,e,a){if(a==null||a==undefined){info("验证支付密码通讯失败");return false}if(a.nCode==0){if(openPayFlag==1){return false}openPayFlag=1;var d="请输入支付密码";var b="提现金额:"+_obj.depositMoney+"元";openPayWindow(d,b,"","",false,"callbackFunctionOpenPayPasswordWindow1")}else{if(a.nCode==2){_TTPopups.open2({content:"您没有设置支付密码,去设置",cancelBtn:"取消",submitBtn:"确定",closeCallBack:"toPwdSet"})}else{info(a.strText)}}}function callbackFunctionOpenPayPasswordWindow1(c,b){if(b==0){openPayFlag=0;return false}strPwd=c;var a=new CDO();a.setStringValue("strServiceName","RichScanService");a.setStringValue("strTransName","isRightPwd");a.setStringValue("strPayPassword",hex_md5(c+""));a.setLongValue("lUserId",_obj.lUserId);raiseTrans(a,"callBackForisRightPwd1")}function callBackForisRightPwd1(b,c,a){if(a==null||a==undefined){info("验证支付密码通讯失败");openPayFlag=0;return false}if(a.nCode==0){payNDeposit(strPwd)}else{if(a.nCode==1){payPwdPutError(a.strText)}else{info(a.strText)}}openPayFlag=0}function payNDeposit(c){var a=c;if($.trim(a).length==6&&!isNaN(Number(a))){var b=new CDO();b.setStringValue("strServiceName","LendIntentService");b.setStringValue("strTransName","applyForWithdraw");b.setLongValue("lLendIntentId",Number(_obj.lLendIntentId));b.setLongValue("lAmount",Number(_obj.depositMoney*100).toFixed(0));raiseTrans(b,"callBackForDepositAdd")}else{info("支付密码验证错误")}}function callBackForDepositAdd(b,c,a){if(a==null||a==undefined){info("通讯失败");return false}if(a.nCode==0){openDelayWindow("myCenter/myLend/wklc_qx_detail.htm","取现成功","",0)}else{info(a.strText)}}function toPwdSet(a){if(a==1){$(".api_Eject_c").remove();$("#fade1234").remove();openDelayWindow("myCenter/securityCenter/payPwdSet.htm","设置支付密码","",0)}}_obj.inputMoney=function(a){var b=a.value;if(b.length>9){info("您输入的金额有误!");a.value="";return false}return true};function backList(){openWindow("myCenter/myLend/list.htm","理财列表","","1","","1")}_obj.html=function(b,a){if((typeof b==="string")&&b.constructor==String){b=document.getElementById(b)}if(b){b.innerHTML="";b.innerHTML=a}};