jsHeight.bodyheight();$(document).ready(function(){var a=getStringValue("strMobile");$("#strMobile").val(a);ios_ction()});var msgFlag=true;$("#edit_btn1").click(function(){if(!msgFlag){return}var a=$("#strVerifyCode").val();if(null==a||a==""||a.length<4){info("验证码输入不正确");return false}msgFlag=false;var c=getStringValue("lUserId");var b=new CDO();b.setStringValue("strServiceName","UserService");b.setStringValue("strTransName","verifySendUserCode");b.setLongValue("lUserId",Number(c));b.setStringValue("strMobileCode",a);raiseTrans(b,"callBackForVerifySendUserCode")});function callBackForVerifySendUserCode(c,d,a){if(a==undefined||a==null){info("请求失败!");msgFlag=true;return false}if(a.nCode==0){var b=$("#strVerifyCode").val();$("#page1").hide();$("#page2").show()}else{info(a.strText)}msgFlag=true}var cardIdFlag=true;$("#edit_btn2").click(function(){if(!cardIdFlag){return}var c=$("#strCardId").val();var a=$("#strName").val();var d=getStringValue("lUserId");if(a==null||a.length<=0||a==undefined){info("请填写姓名");return false}if(c==null||c.length<=0||c==undefined){info("请填身份证号");return false}if(c.length!=15&&c.length!=18){info("请输入正确的身份证号");return false}cardIdFlag=false;var b=new CDO();b.setStringValue("strServiceName","UserService");b.setStringValue("strTransName","verifyStrIdentity");b.setLongValue("lUserId",Number(d));b.setStringValue("strName",a);b.setStringValue("strIdentity",c);raiseTrans(b,"callBackForVerifyStrIdentity")});function callBackForVerifyStrIdentity(b,c,a){if(a==undefined||a==null){info("请求失败!");cardIdFlag=true;return false}if(a.nCode==0){$("#page2").hide();$("#page3").show()}else{info(a.strText)}cardIdFlag=true}var pwdFlag=true;$("#edit_btn3").click(function(){if(!pwdFlag){return}var b=$("#strPassword1").val();var a=$("#strPassword2").val();if(null==b||b==""||b.length<6){info("支付密码长度为6");return false}var d=new RegExp("^[0-9]{6}$");if(!d.test(b)){info("支付密码必须为数字");return false}if(b!=a){info("支付密码与确认密码不一致");return false}var g=$("#strCardId").val();var c=$("#strName").val();var e=$("#strVerifyCode").val();pwdFlag=false;var h=getStringValue("lUserId");var f=new CDO();f.setStringValue("strServiceName","CustomerService");f.setStringValue("strTransName","retrievePayPassword");f.setLongValue("lUserId",Number(h));f.setStringValue("strName",c);f.setStringValue("strIdentity",g);f.setStringValue("strMobileCode",e);f.setStringValue("strPayPassword",hex_md5(b));raiseTrans(f,"callBackForSetPayPassword")});function callBackForSetPayPassword(b,c,a){if(a==undefined||a==null){info("请求失败!");pwdFlag=true;return true}if(a.nCode==0){info("设置支付密码成功");setTimeout(function(){openWindow("myCenter/securityCenter/accountCenter.htm","安全中心","",0,"")},1500)}else{info(a.strText)}pwdFlag=true};