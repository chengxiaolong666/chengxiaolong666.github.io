var strSerlNum=getQueryString("strSerlNum");var nFlage=-1;var bIsCallBack=true;jsHeight.bodyheight();$(document).ready(function(){getAccountListByCondition(0)});function reChoose(a,b){if($(b).hasClass("row")){return false}else{$("#accountInfo").html("");$("#WweiOrderlist").find("li").each(function(){$(this).removeClass("row")});$(b).addClass("row");_shade_layer.show("加载中,请稍候......");getAccountListByCondition(a)}}function getAccountListByCondition(a){nFlage=a;var b=new CDO();b.setStringValue("strServiceName","AccountService");b.setStringValue("strTransName","getAccountListByOrder");b.setStringValue("strSerlNum",strSerlNum);b.setIntegerValue("nState",a);raiseTrans(b,"callBackForAccountListByCondition")}function callBackForAccountListByCondition(p,e,b){if(b==null||b==undefined){info("通信失败!");_shade_layer.hide();return false}var c="";if(nFlage==2){$("#btAlready").addClass("row");c="暂无已还账单数据"}if(nFlage==0){$("#btNo").addClass("row");c="暂无未还账单数据"}if(b.nCode==0){var n=e.getLongValue("lFirstCanPay");var a=e.getCDOArrayValue("cdosAccountOrder");if(a.length<1){_Not.show("accountInfo",c,"../../")}else{for(var f=0;f<a.length;f++){var l="";var m=a[f].exists("lId")?a[f].getStringValue("lId"):"";var d=a[f].exists("lOrderId")?a[f].getStringValue("lOrderId"):"";var g=a[f].exists("nCurrentTermNum")?a[f].getStringValue("nCurrentTermNum"):"0";var k=a[f].exists("nShouldMoney")?a[f].getStringValue("nShouldMoney"):"0";var o=a[f].exists("nBreachMoney")?a[f].getStringValue("nBreachMoney"):"0";var h=a[f].exists("dtRepaymentDate")?a[f].getDateValue("dtRepaymentDate"):"";var q=a[f].exists("dtRepaymentDateReal")?a[f].getDateValue("dtRepaymentDateReal"):"";var j=a[f].getStringValue("nState");if(j=="0"){j="未还款"}else{if(j=="2"){j="还款成功"}else{j="异常状态"}}l="<li>";if(n==m){l+='<div class="Wssr_ransom" onclick="toPayBill('+m+",'"+k+"',"+d+')">还款</div>'}l+='<a href="javascript:void(0)"><div class="WlistrechssDeta"><div class="WBWusiness_test">'+g+'期</div><div class="WssrCzjlDetails clearfix"><div class="WsAppOrdreDetailsWid"><div class="WappsOrdreDetailsUs">应还金额：</div><div class="WappOrdrerDetailsoCont">'+k+'元</div></div><div class="WsAppOrdreDetailsWid"><div class="WappsOrdreDetailsUs">逾期金额：</div><div class="WappOrdrerDetailsoCont">'+o+'元</div></div><div class="WsAppOrdreDetailsWid"><div class="WappsOrdreDetailsUs">还款日：</div><div class="WappOrdrerDetailsoCont">'+h+"</div></div>";if(nFlage==2){l=l+'<div class="WsAppOrdreDetailsWid"><div class="WappsOrdreDetailsUs">还款时间：</div><div class="WappOrdrerDetailsoCont">'+q+"</div></div>"}l=l+'<div class="WsAppOrdreDetailsWid"><div class="WappsOrdreDetailsUs">还款状态：</div><div class="WappOrdrerDetailsoCont"><span class="span_Orange">'+j+"</span></div></div></div></div></a></li>";$("#accountInfo").append(l)}}}else{info(b.strText)}_shade_layer.hide()}function toOrderList(){openDelayWindow("myCenter/mallOrder/orderList.htm","订单列表","",0)}function toPayBill(c,b,a){if(b.indexOf(",")>0){b=b.replace(",","")}setStringValue("strFirstMoney",b*100);openWindow("mall/mallPay.htm","支付账单","lId="+c+"&mallPayType=2&lOrderId="+a,0)};