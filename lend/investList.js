var _obj={};_obj.pageSize=20;_obj.pageIndex=1;_obj.loadFlag=true;_obj.asynFlag=true;_obj.muiFlag=true;_obj.type=1;_obj.lLenderId=-1;window.onload=function(){_shade_layer.show("登录中,请稍候......");_obj.ulDom=_obj.get("invest_record_id");_obj.lId=getStringValue("lId");_obj.productName=getStringValue("productName");_obj.type=getStringValue("investListType");productName=decodeURI(_obj.productName);_obj.html("title_id",productName);_obj.load()};_obj.load=function(){if(_obj.type==1){_obj.loadInvestRecord();_obj.loadProductDetail()}else{_obj.lLenderId=getStringValue("lLenderId");_obj.loadCreditorRecord();_obj.showZQDetail()}};_obj.loadInvestRecord=function(){var a=new CDO();a.setStringValue("strServiceName","LendIntentService");a.setStringValue("strTransName","getProductBidRecordList");a.setLongValue("lProductId",Number(_obj.lId));a.setIntegerValue("nPageSize",_obj.pageSize);a.setIntegerValue("nRecordOffset",_obj.pageIndex);raiseTrans(a,"callBackInvestRecord");_obj.asynFlag=false};function callBackInvestRecord(l,e,b){if(_obj.pageIndex==1){_obj.ulDom.innerHTML="";_obj.showMain()}var a=e.getIntegerValue("nRecordCount");if(a==0){_Not.show("invest_record_id","暂无投资记录");return}if(b.nCode==0&&e.exists("cdosProductList")){var m=e.getCDOArrayValue("cdosProductList");var a=e.getCDOArrayValue("nRecordCount");for(var d=0;d<m.length;d++){var h=m[d];var i=document.createElement("li");var g=h.getStringValue("strLenderName");var c=h.getStringValue("lAmount");c=(c/100).toFixed(2);var j=h.getStringValue("dtCreateTime");var f=j.split(" ");i.innerHTML='<div class="z_financial_tz_date">'+f[0]+'</div><div class="z_financial_tz_person">'+g+'</div><div class="z_financial_tz_money">'+c+"</div>";_obj.ulDom.appendChild(i)}if(_obj.pageIndex*_obj.pageSize>=a){_obj.loadFlag=false}_obj.pageIndex=_obj.pageIndex+1}_obj.asynFlag=true}_obj.loadProductDetail=function(){var a=new CDO();a.setStringValue("strServiceName","LendProductService");a.setStringValue("strTransName","getDeptLendProductIntroByIdForMobile");a.setLongValue("lId",Number(_obj.lId));raiseTrans(a,"callBackProductDetail")};function callBackProductDetail(b,d,a){if(a.nCode==0&&d.exists("strProductIntro")){var c=d.getStringValue("strProductIntro");c=c.replace(/\/images\/IntroImages/g,"../img");_obj.html("scroll_1",c)}}_obj.loadCreditorRecord=function(){var a=new CDO();a.setStringValue("strServiceName","LendIntentService");a.setStringValue("strTransName","getTransferRecordByTransferId");a.setLongValue("lId",Number(_obj.lId));a.setLongValue("lLenderId",Number(_obj.lLenderId));a.setIntegerValue("nPageSize",_obj.pageSize);a.setIntegerValue("nRecordOffset",_obj.pageIndex);raiseTrans(a,"callBackCreditorRecord");_obj.asynFlag=false};function callBackCreditorRecord(c,h,b){if(_obj.pageIndex==1){_obj.ulDom.innerHTML="";_obj.showMain()}var a=h.getIntegerValue("nRecordCount");if(a==0){_Not.show("invest_record_id","暂无投资记录");return}if(b.nCode==0&&h.exists("cdosData")){var i=h.getCDOArrayValue("cdosData");var a=h.getCDOArrayValue("nRecordCount");for(var f=0;f<i.length;f++){var j=i[f];var l=document.createElement("li");var e=j.getStringValue("strReceiverName");var d=j.getStringValue("lAmount");d=(d/100).toFixed(2);var g=j.getStringValue("strTransferDate");l.innerHTML='<div class="z_financial_tz_date">'+g+'</div><div class="z_financial_tz_person">'+e+'</div><div class="z_financial_tz_money">'+d+"</div>";_obj.ulDom.appendChild(l)}if(_obj.pageIndex*_obj.pageSize>=a){_obj.loadFlag=false}_obj.pageIndex=_obj.pageIndex+1}_obj.asynFlag=true}_obj.showZQDetail=function(){var a=_obj.get("div_detail_id").innerHTML;_obj.html("scroll_1",a)};_obj.chooice=function(b,f,c,e){var a=b.className;if(a&&a=="row"){return}b.className="row";var d=_obj.get(f);d.className="";_obj.show(c,false);_obj.show(e,true);if(f=="record_id"){_obj.asynFlag=false}else{_obj.asynFlag=true}};_obj.showMain=function(){_obj.show("main_id",true);_shade_layer.hide()};_obj.ret=function(a,b){if(a==undefined||a==null){info(b);return false}if(a.nCode!=0){info(a.strText);return false}};_obj.get=function(a){return document.getElementById(a)};_obj.show=function(c,b){if((typeof c==="string")&&c.constructor==String){c=document.getElementById(c)}if(c){var a=b==true?"block":"none";c.style.display=a}};_obj.html=function(b,a){if((typeof b==="string")&&b.constructor==String){b=document.getElementById(b)}if(b){b.innerHTML="";b.innerHTML=a}};jQuery(document).scroll(function(){var b=jQuery(this).scrollTop();var a=jQuery(document).height();var c=jQuery(this).height();if(b+c>=a){if(_obj.asynFlag==true&&_obj.loadFlag==true){_obj.load()}}});jsHeight.bodyheight();